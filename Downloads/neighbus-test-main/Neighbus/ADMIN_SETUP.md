# ê´€ë¦¬ì ê³„ì • ì„¤ì • ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

Neighbus í”„ë¡œì íŠ¸ì˜ ê´€ë¦¬ì ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì„¤ì • ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸ”‘ ê´€ë¦¬ì ê³„ì • ì •ë³´

### ê¸°ë³¸ ê´€ë¦¬ì ê³„ì •
- **Username**: `Admin`
- **Password**: `12345`
- **Grade**: `0` (ê´€ë¦¬ì ë“±ê¸‰)

### ê´€ë¦¬ì ê¶Œí•œ
- Gradeê°€ `0`ì¸ ì‚¬ìš©ìëŠ” ìë™ìœ¼ë¡œ `ROLE_ADMIN` ê¶Œí•œì„ ë°›ìŠµë‹ˆë‹¤
- ë¡œê·¸ì¸ ì‹œ ìë™ìœ¼ë¡œ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ(`/admin`)ë¡œ ì´ë™í•©ë‹ˆë‹¤

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰

```bash
./gradlew bootRun
```

### 2. ê´€ë¦¬ì ë¡œê·¸ì¸

1. ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8080/account/login ì ‘ì†
2. ë¡œê·¸ì¸ ì •ë³´ ì…ë ¥:
   - Username: `Admin`
   - Password: `12345`
3. ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
4. ìë™ìœ¼ë¡œ http://localhost:8080/admin í˜ì´ì§€ë¡œ ì´ë™

---

## ğŸ› ï¸ ìƒˆë¡œìš´ ê´€ë¦¬ì ê³„ì • ë§Œë“¤ê¸°

### ë°©ë²• 1: ê¸°ì¡´ ê³„ì •ì„ ê´€ë¦¬ìë¡œ ë³€ê²½

DBì—ì„œ í•´ë‹¹ ê³„ì •ì˜ `grade`ë¥¼ `0`ìœ¼ë¡œ ë³€ê²½:

```bash
mysql -u root -p1234 neighbus -e "UPDATE users SET grade = 0 WHERE username = 'ì‚¬ìš©ìì´ë¦„';"
```

### ë°©ë²• 2: ìƒˆ ê´€ë¦¬ì ê³„ì • ì§ì ‘ ìƒì„±

#### Step 1: ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”

ì›í•˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”:

```bash
./gradlew encodePassword --args="ì›í•˜ëŠ”ë¹„ë°€ë²ˆí˜¸"
```

ì¶œë ¥ ì˜ˆì‹œ:
```
ì›ë³¸ ë¹„ë°€ë²ˆí˜¸: ì›í•˜ëŠ”ë¹„ë°€ë²ˆí˜¸
ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸:
{bcrypt}$2a$10$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

========================================
ì•„ë˜ SQLì„ ë³µì‚¬í•´ì„œ MySQLì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”:
========================================

UPDATE users
SET password = '{bcrypt}$2a$10$xxxxx...',
    grade = 0
WHERE username = 'admin';
```

#### Step 2: DBì— ê³„ì • ìƒì„± ë˜ëŠ” ì—…ë°ì´íŠ¸

**ìƒˆ ê³„ì • ìƒì„±:**
```sql
INSERT INTO users (
    name, username, password, city, address, phone, email,
    image, grade, birth, sex, user_uuid, nickname
) VALUES (
    'ê´€ë¦¬ì',
    'admin',
    '{bcrypt}$2a$10$xxxxx...',  -- ìœ„ì—ì„œ ìƒì„±í•œ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸
    1,
    'ê´€ë¦¬ì ì£¼ì†Œ',
    '010-0000-0000',
    'admin@example.com',
    'default.jpg',
    0,  -- ê´€ë¦¬ì ë“±ê¸‰
    '990101',
    'M',
    UUID(),
    'Admin'
);
```

**ê¸°ì¡´ ê³„ì • ì—…ë°ì´íŠ¸:**
```bash
mysql -u root -p1234 neighbus -e "UPDATE users SET password = '{bcrypt}\$2a\$10\$xxxxx...', grade = 0 WHERE username = 'ì‚¬ìš©ìì´ë¦„';"
```

---

## ğŸ” ê´€ë¦¬ì ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

### ì ‘ê·¼ ê°€ëŠ¥í•œ ê´€ë¦¬ì í˜ì´ì§€

1. **ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ**: http://localhost:8080/admin
2. **ì‚¬ìš©ì ê´€ë¦¬**: http://localhost:8080/admin/users
3. **ì‹œìŠ¤í…œ ì„¤ì •**: http://localhost:8080/admin/settings

### ê¶Œí•œ í™•ì¸

ì¼ë°˜ ì‚¬ìš©ì(grade != 0)ë¡œ `/admin` ì ‘ì† ì‹œ:
- **403 Forbidden** ì—ëŸ¬ ë°œìƒ
- ì ‘ê·¼ ê±°ë¶€ë¨

ê´€ë¦¬ì(grade = 0)ë¡œ ì ‘ì† ì‹œ:
- ì •ìƒ ì ‘ê·¼ ê°€ëŠ¥
- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ í‘œì‹œ

---

## âš™ï¸ ì„¤ì • ì •ë³´

### Grade ì‹œìŠ¤í…œ

| Grade | ê¶Œí•œ | ì„¤ëª… |
|-------|------|------|
| 0 | ROLE_ADMIN | ê´€ë¦¬ì ê¶Œí•œ (ëª¨ë“  ê¸°ëŠ¥ ì ‘ê·¼ ê°€ëŠ¥) |
| 1+ | ROLE_USER | ì¼ë°˜ ì‚¬ìš©ì ê¶Œí•œ |

### ë¡œê·¸ì¸ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ ê·œì¹™

- **Grade 0 (ê´€ë¦¬ì)**: ìë™ìœ¼ë¡œ `/admin`ìœ¼ë¡œ ì´ë™
- **Grade 1+ (ì¼ë°˜ ì‚¬ìš©ì)**: `/` ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¡œê·¸ì¸ì´ ì•ˆ ë  ë•Œ

1. **DBì— ê³„ì •ì´ ìˆëŠ”ì§€ í™•ì¸:**
```bash
mysql -u root -p1234 neighbus -e "SELECT username, grade, SUBSTRING(password, 1, 30) FROM users WHERE username = 'Admin';"
```

2. **ë¹„ë°€ë²ˆí˜¸ í˜•ì‹ í™•ì¸:**
   - ë¹„ë°€ë²ˆí˜¸ê°€ `{bcrypt}$2a$10$...` í˜•íƒœë¡œ ì‹œì‘í•´ì•¼ í•¨
   - ì•„ë‹ˆë©´ ë‹¤ì‹œ ì•”í˜¸í™”í•´ì„œ ì—…ë°ì´íŠ¸

3. **Grade í™•ì¸:**
   - ê´€ë¦¬ì ê¶Œí•œì„ ë°›ìœ¼ë ¤ë©´ `grade = 0`ì´ì–´ì•¼ í•¨

### ê´€ë¦¬ì í˜ì´ì§€ ì ‘ê·¼ì´ ì•ˆ ë  ë•Œ

1. **ë¡œê·¸ í™•ì¸:**
   - í„°ë¯¸ë„ì—ì„œ `>>> ê´€ë¦¬ì ë¡œê·¸ì¸ ê°ì§€!` ë©”ì‹œì§€ê°€ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸
   - `Grade: 0` ë¡œê·¸ê°€ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸

2. **Grade ì¬í™•ì¸:**
```bash
mysql -u root -p1234 neighbus -e "UPDATE users SET grade = 0 WHERE username = 'Admin';"
```

### ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠì—ˆì„ ë•Œ

ë¹„ë°€ë²ˆí˜¸ë¥¼ `12345`ë¡œ ì´ˆê¸°í™”:

```bash
mysql -u root -p1234 neighbus -e "UPDATE users SET password = '{bcrypt}\$2a\$10\$qJtochcv.8xYjzhroZFEkeoscTYjy5lI1hELBSkUcTqEiB7K1LoFK', grade = 0 WHERE username = 'Admin';"
```

---

## ğŸ“ ì°¸ê³  ì‚¬í•­

### ë³´ì•ˆ

- í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë°˜ë“œì‹œ ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©
- ê¸°ë³¸ ê´€ë¦¬ì ê³„ì •(`Admin/12345`)ì€ í…ŒìŠ¤íŠ¸ìš©
- ì‹¤ì œ ë°°í¬ ì „ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í•„ìˆ˜

### íŒŒì¼ ìœ„ì¹˜

- **ê´€ë¦¬ì ê¶Œí•œ ì„¤ì •**: `src/main/java/com/neighbus/account/AccountDTO.java:143`
- **ë¡œê·¸ì¸ í•¸ë“¤ëŸ¬**: `src/main/java/com/neighbus/config/CustomAuthenticationSuccessHandler.java`
- **Security ì„¤ì •**: `src/main/java/com/neighbus/SecurityConfig.java:37,72`
- **ê´€ë¦¬ì í˜ì´ì§€**: `src/main/resources/templates/admin/`

### ë°ì´í„°ë² ì´ìŠ¤

- **í…Œì´ë¸”**: `users`
- **ê´€ë¦¬ì êµ¬ë¶„**: `grade = 0`
- **ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”**: bcrypt

---

## ğŸ“ ë¬¸ì˜

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ê°œë°œíŒ€ì— ë¬¸ì˜í•˜ì„¸ìš”.
